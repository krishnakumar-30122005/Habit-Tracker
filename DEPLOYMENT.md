# Deployment Guide

This document outlines the deployment process for the Habit Tracker application, which is configured as a full-stack application where the Node.js/Express backend serves the React frontend.

## Architecture

*   **Frontend**: React (Vite)
*   **Backend**: Node.js (Express)
*   **Database**: MongoDB Atlas

The application is deployed as a single service. The backend serves the static frontend files generated by the build process.

## Prerequisites

Ensure the following environment variables are set in your deployment environment (e.g., Render, Vercel, Heroku):

*   `MONGODB_URI`: Connection string for your MongoDB database.
*   `JWT_SECRET`: Secret key for signing JSON Web Tokens.
*   `NODE_ENV`: Set to `production`.

## Build & Start Scripts

The `package.json` includes the following scripts used for deployment:

*   **Build**: `npm install && npm run build`
    *   Installs dependencies.
    *   Runs `tsc -b && vite build` to compile the TypeScript/React frontend into the `dist/` directory.
*   **Start**: `npm start`
    *   Runs `node server/index.js` to start the backend server.

## Server Configuration

The `server/index.js` file is configured to serve the frontend:

```javascript
// Serve static files from the dist directory
app.use(express.static(path.join(__dirname, '../dist')));

// Catch-all handler for client-side routing
app.use((req, res) => {
    res.sendFile(path.join(__dirname, '../dist/index.html'));
});
```

## Deployment Steps

1.  **Push to Git**: Ensure your latest changes are pushed to the main branch (or your deployment branch).
2.  **Connect to Host**: Connect your repository to your hosting provider (e.g., Render).
3.  **Configure Settings**:
    *   **Build Command**: `npm install && npm run build`
    *   **Start Command**: `npm start`
4.  **Environment Variables**: Add the variables listed in the Prerequisites section.
5.  **Deploy**: Trigger the deployment.

## Troubleshooting

*   **White Screen / 404**: Ensure `npm run build` ran successfully and the `dist` folder exists. Check that the server is correctly serving `index.html` for unknown routes.
*   **Connection Errors**: Verify `MONGODB_URI` is correct and your IP is whitelisted in MongoDB Atlas (if not executing from a known cloud provider IP).
